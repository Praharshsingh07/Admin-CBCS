<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cbcs-amity.web.app/boxicons/css/boxicons.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="STYLE.css">
    <title>Dean Dash Board</title>
</head>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyBz0SHaBEb56NVEOU1KuE09zWCaAqwNuh4",
    authDomain: "cbcs-amity.firebaseapp.com",
    databaseURL: "https://cbcs-amity-default-rtdb.firebaseio.com",
    projectId: "cbcs-amity",
    storageBucket: "cbcs-amity.appspot.com",
    messagingSenderId: "640706103348",
    appId: "1:640706103348:web:181d9d7a342adc6009e261",
    measurementId: "G-K8XRYR8GPL"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
<body>

    <div id="loader">
        <h1>WELCOME</h1>
        <h1>TO</h1>
        <h1>ADMIN LOGIN</h1>
        
    </div>
    
 <div class="wrapper" id="main">
    <nav class="nav">
        <div class="nav-logo">
            <img src="images/2.png" alt="">
        </div>

        <div class="nav-menu" id="navMenu">
            <ul>
                <!-- <li><a href="Student_login.html" class="link active">Student</a></li> -->
               <!--<li><a href="faulty_login.html" class="link">Faculty</a></li>-->
               <!--- <li><a href="admin.html" class="link">Admin</a></li>-->
            </ul>
        </div>
        <div class="nav-button">
            <button class="btn white-btn" id="loginBtn" onclick="login()">Sign In</button>
            <!-- <button class="btn" id="registerBtn" onclick="register()">Sign Up</button> -->
        </div>
        <div class="nav-menu-btn">
            <i class="bx bx-menu" onclick="myMenuFunction()"></i>
        </div>
    </nav>

<!----------------------------- Form box ----------------------------------->    
    <div class="form-box">
        
        <!------------------- login form -------------------------->

        <div class="login-container" id="login">
            <div class="top">
                <!-- <span>Don't have an account? <a href="#" onclick="register()">Sign Up</a></span> -->
                <header><B>ADMIN LOGIN</B></header>
            </div>
            <form id="loginForm">
                <div class="input-box">
                    <input type="text" id="username" class="input-field" placeholder="Username or Email">
                    <i class="bx bx-user"></i>
                </div>
                <div class="input-box">
                    <input type="password" id="password" class="input-field" placeholder="Password">
                    <i class="bx bx-lock-alt"></i>
                </div>
                <div class="input-box">
                    <input type="submit" class="submit" value="Sign In">
                </div>
                <!-- Other elements -->
            </form>
        </div>

        <!------------------- registration form -------------------------->
        <!-- <div class="register-container" id="register">
            <div class="top">
                <span>Have an account? <a href="#" onclick="login()">Login</a></span>
                <header>Sign Up</header>
            </div>
            <div class="two-forms">
                <div class="input-box">
                    <input type="text" class="input-field" placeholder="Firstname">
                    <i class="bx bx-user"></i>
                </div>
                <div class="input-box">
                    <input type="text" class="input-field" placeholder="Lastname">
                    <i class="bx bx-user"></i>
                </div>
            </div>
            <div class="input-box">
                <input type="text" class="input-field" placeholder="Email">
                <i class="bx bx-envelope"></i>
            </div>
            <div class="input-box">
                <input type="password" class="input-field" placeholder="Password">
                <i class="bx bx-lock-alt"></i>
            </div>
            <div class="input-box">
                <input type="submit" class="submit" value="Register">
            </div>
            <div class="two-col">
                <div class="one">
                    <input type="checkbox" id="register-check">
                    <label for="register-check"> Remember Me</label>
                </div>
                <div class="two">
                    <label><a href="#">Terms & conditions</a></label>
                </div>
            </div>
        </div>
    </div>
</div>    -->


<!-- <script>
    window.onload = function() {
        // Clear the password field every time the login page is loaded
        document.getElementById("password").value = "";

        // Check if the user is coming back from the dashboard and redirect to login
        if (sessionStorage.getItem("loggedIn") === "true") {
            sessionStorage.setItem("loggedIn", "false");
            // Here you can add any logic you want to execute when the user comes back to the login page
        }
    };

    document.getElementById("loginForm").onsubmit = function(event) {
        event.preventDefault();

        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;

        if (authenticate(username, password)) {
            // Set the session storage item when logged in
            sessionStorage.setItem("loggedIn", "true");
            window.location.href = 'index.html';
        } else {
            alert("Invalid username or password");
        }
    };

    function authenticate(username, password) {
        return username === "admin" && password === "Amity@123";
    }
</script> -->
<!-- <script>
    window.onload = function(){

    }
    // This function runs when the page is initially loaded or when navigated back to
    window.onpageshow = function(event) {
        // Clear the password field regardless of how the page is loaded
        document.getElementById("password").value = "";

        // Additional checks or actions can be added here
        if (event.persisted || (window.performance && window.performance.navigation.type == 2)) {
            if (sessionStorage.getItem("loggedIn") === "true") {
            sessionStorage.setItem("loggedIn", "false");
            // Here you can add any logic you want to execute when the user comes back to the login page
        }
            // Any specific actions when the page is loaded from cache or back navigation
        }
    };

    // This function handles the form submission
    document.getElementById("loginForm").onsubmit = function(event) {
        event.preventDefault(); // Prevent the default form submission

        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;

        // Call the authenticate function
        if (authenticate(username, password)) {
            sessionStorage.setItem("loggedIn", "true");
            // Redirect to the dashboard or another page if login is successful
            window.location.href = 'index.html'; // Replace with the actual dashboard page URL
        } else {
            // Show an error message if login fails
            alert("Invalid username or password");
        }
    };

    // This function checks the credentials (simple example)
    function authenticate(username, password) {
        // Replace with real authentication logic
        return username === "admin" && password === "Amity@123"; // Replace with actual credentials
    }
</script> -->

<script>
    window.onload = function() {
        // Check if the 'returningToLogin' flag is set in the session storage
        if (sessionStorage.getItem("returningToLogin") === "true") {
            // Clear the session storage or any session tracking
            sessionStorage.clear();

            // Optionally, reload the page to reset any state
            window.location.reload();
        } else {
            // Set a flag indicating that the user has landed on the login page
            sessionStorage.setItem("returningToLogin", "true");
        }

        // Clear the password field
        document.getElementById("password").value = "";
    };

    document.getElementById("loginForm").onsubmit = function(event) {
        event.preventDefault();

        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;

        if (authenticate(username, password)) {
            // Clear the 'returningToLogin' flag as the user is now logging in
            sessionStorage.removeItem("returningToLogin");

            // Redirect to the dashboard page
            window.location.href = 'datafetch.html'; // Replace with your dashboard page URL
        } else {
            alert("Invalid username or password");
        }
    };

    function authenticate(username, password) {
        // Your authentication logic here
        return username === "admin" && password === "Amity@123"; // Replace with actual credentials
    }
</script>



</body>
</html>